{"numFailedTestSuites":3,"numFailedTests":19,"numPassedTestSuites":0,"numPassedTests":10,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":1,"numTodoTests":0,"numTotalTestSuites":3,"numTotalTests":29,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1755740996470,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["JunkManager","Junk Generation"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Junk Generation should generate junk when first player","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should generate junk when first player"},{"ancestorTitles":["JunkManager","Junk Generation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Junk Generation should not generate junk when not first player","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not generate junk when not first player"},{"ancestorTitles":["JunkManager","Junk Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Junk Generation should not spawn junk in same chunk twice","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not spawn junk in same chunk twice"},{"ancestorTitles":["JunkManager","Remote Junk Sync"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Remote Junk Sync should spawn remote junk correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should spawn remote junk correctly"},{"ancestorTitles":["JunkManager","Remote Junk Sync"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Remote Junk Sync should destroy remote junk correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should destroy remote junk correctly"},{"ancestorTitles":["JunkManager","Projectile Collisions"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: child.material.emissive.clone is not a function\n    at /Users/tk/Documents/projects/game/src/world/Junk.ts:121:58\n    at Mesh.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:196:5)\n    at Group.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:198:13)\n    at JunkPiece.takeDamage (/Users/tk/Documents/projects/game/src/world/Junk.ts:119:16)\n    at JunkManager.checkProjectileCollisions (/Users/tk/Documents/projects/game/src/world/Junk.ts:373:29)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/world/Junk.test.ts:138:34)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"JunkManager Projectile Collisions should detect projectile collision with junk","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect projectile collision with junk"},{"ancestorTitles":["JunkManager","Projectile Collisions"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Projectile Collisions should not detect collision when projectile is far away","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not detect collision when projectile is far away"},{"ancestorTitles":["JunkManager","Projectile Collisions"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: child.material.emissive.clone is not a function\n    at /Users/tk/Documents/projects/game/src/world/Junk.ts:121:58\n    at Mesh.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:196:5)\n    at Group.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:198:13)\n    at JunkPiece.takeDamage (/Users/tk/Documents/projects/game/src/world/Junk.ts:119:16)\n    at JunkManager.checkProjectileCollisions (/Users/tk/Documents/projects/game/src/world/Junk.ts:373:29)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/world/Junk.test.ts:178:34)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"JunkManager Projectile Collisions should handle partial damage without destroying","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle partial damage without destroying"},{"ancestorTitles":["JunkManager","Network Message Handling"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Network Message Handling should send junk spawn message when generating as first player","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should send junk spawn message when generating as first player"},{"ancestorTitles":["JunkManager","Network Message Handling"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: child.material.emissive.clone is not a function\n    at /Users/tk/Documents/projects/game/src/world/Junk.ts:121:58\n    at Mesh.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:196:5)\n    at Group.traverse (/Users/tk/Documents/projects/game/src/test/mocks/three.mock.ts:198:13)\n    at JunkPiece.takeDamage (/Users/tk/Documents/projects/game/src/world/Junk.ts:119:16)\n    at JunkManager.checkProjectileCollisions (/Users/tk/Documents/projects/game/src/world/Junk.ts:373:29)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/world/Junk.test.ts:230:19)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"JunkManager Network Message Handling should send junk destroy message when junk is destroyed locally","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should send junk destroy message when junk is destroyed locally"},{"ancestorTitles":["JunkManager","Chunk Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Chunk Management should track junk by chunk","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track junk by chunk"},{"ancestorTitles":["JunkManager","Chunk Management"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Chunk Management should get junk in radius","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should get junk in radius"},{"ancestorTitles":["JunkManager","Deterministic Generation"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"JunkManager Deterministic Generation should generate same junk for same chunk coordinates","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate same junk for same chunk coordinates"}],"endTime":1755740996880,"message":"  ● JunkManager › Projectile Collisions › should detect projectile collision with junk\n\n    TypeError: child.material.emissive.clone is not a function\n\n      119 |     this.group.traverse(child => {\n      120 |       if (child instanceof THREE.Mesh && child.material instanceof THREE.MeshStandardMaterial) {\n    > 121 |         const originalEmissive = child.material.emissive.clone();\n          |                                                          ^\n      122 |         child.material.emissive = new THREE.Color(0xff0000);\n      123 |         child.material.emissiveIntensity = 2.0;\n      124 |         \n\n      at src/world/Junk.ts:121:58\n      at Mesh.traverse (src/test/mocks/three.mock.ts:196:5)\n      at Group.traverse (src/test/mocks/three.mock.ts:198:13)\n      at JunkPiece.takeDamage (src/world/Junk.ts:119:16)\n      at JunkManager.checkProjectileCollisions (src/world/Junk.ts:373:29)\n      at Object.<anonymous> (src/world/Junk.test.ts:138:34)\n\n  ● JunkManager › Projectile Collisions › should handle partial damage without destroying\n\n    TypeError: child.material.emissive.clone is not a function\n\n      119 |     this.group.traverse(child => {\n      120 |       if (child instanceof THREE.Mesh && child.material instanceof THREE.MeshStandardMaterial) {\n    > 121 |         const originalEmissive = child.material.emissive.clone();\n          |                                                          ^\n      122 |         child.material.emissive = new THREE.Color(0xff0000);\n      123 |         child.material.emissiveIntensity = 2.0;\n      124 |         \n\n      at src/world/Junk.ts:121:58\n      at Mesh.traverse (src/test/mocks/three.mock.ts:196:5)\n      at Group.traverse (src/test/mocks/three.mock.ts:198:13)\n      at JunkPiece.takeDamage (src/world/Junk.ts:119:16)\n      at JunkManager.checkProjectileCollisions (src/world/Junk.ts:373:29)\n      at Object.<anonymous> (src/world/Junk.test.ts:178:34)\n\n  ● JunkManager › Network Message Handling › should send junk destroy message when junk is destroyed locally\n\n    TypeError: child.material.emissive.clone is not a function\n\n      119 |     this.group.traverse(child => {\n      120 |       if (child instanceof THREE.Mesh && child.material instanceof THREE.MeshStandardMaterial) {\n    > 121 |         const originalEmissive = child.material.emissive.clone();\n          |                                                          ^\n      122 |         child.material.emissive = new THREE.Color(0xff0000);\n      123 |         child.material.emissiveIntensity = 2.0;\n      124 |         \n\n      at src/world/Junk.ts:121:58\n      at Mesh.traverse (src/test/mocks/three.mock.ts:196:5)\n      at Group.traverse (src/test/mocks/three.mock.ts:198:13)\n      at JunkPiece.takeDamage (src/world/Junk.ts:119:16)\n      at JunkManager.checkProjectileCollisions (src/world/Junk.ts:373:29)\n      at Object.<anonymous> (src/world/Junk.test.ts:230:19)\n","name":"/Users/tk/Documents/projects/game/src/world/Junk.test.ts","startTime":1755740996624,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Projectile","initialization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile initialization should create projectile with correct properties","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create projectile with correct properties"},{"ancestorTitles":["Projectile","initialization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile initialization should set initial velocity correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should set initial velocity correctly"},{"ancestorTitles":["Projectile","initialization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile initialization should position mesh at start position","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should position mesh at start position"},{"ancestorTitles":["Projectile","initialization"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile initialization should create visual components","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create visual components"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should apply gravity to velocity","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should apply gravity to velocity"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should update position based on velocity","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update position based on velocity"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should decrease lifetime","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should decrease lifetime"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should return false when lifetime expires","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return false when lifetime expires"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should return false when projectile goes too low","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return false when projectile goes too low"},{"ancestorTitles":["Projectile","update"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile update should animate visual effects","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should animate visual effects"},{"ancestorTitles":["Projectile","terrain collision"],"duration":1,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile terrain collision should detect collision with terrain","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should detect collision with terrain"},{"ancestorTitles":["Projectile","terrain collision"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile terrain collision should not collide when above terrain","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not collide when above terrain"},{"ancestorTitles":["Projectile","terrain collision"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile terrain collision should create impact effect on collision","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create impact effect on collision"},{"ancestorTitles":["Projectile","trail effect"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile trail effect should update trail positions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update trail positions"},{"ancestorTitles":["Projectile","dispose"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile dispose should clean up resources","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should clean up resources"},{"ancestorTitles":["Projectile","shared resources"],"duration":0,"failureDetails":[{}],"failureMessages":["TypeError: Projectile.coreMaterial.clone is not a function\n    at new Projectile (/Users/tk/Documents/projects/game/src/combat/Projectile.ts:86:31)\n    at Object.<anonymous> (/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts:13:18)\n    at Promise.then.completed (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:281:40)\n    at _runTest (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:246:5)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/tk/Documents/projects/game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/tk/Documents/projects/game/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Projectile shared resources should reuse geometry and materials across instances","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reuse geometry and materials across instances"}],"endTime":1755740996950,"message":"  ● Projectile › initialization › should create projectile with correct properties\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › initialization › should set initial velocity correctly\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › initialization › should position mesh at start position\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › initialization › should create visual components\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should apply gravity to velocity\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should update position based on velocity\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should decrease lifetime\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should return false when lifetime expires\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should return false when projectile goes too low\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › update › should animate visual effects\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › terrain collision › should detect collision with terrain\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › terrain collision › should not collide when above terrain\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › terrain collision › should create impact effect on collision\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › trail effect › should update trail positions\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › dispose › should clean up resources\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n\n  ● Projectile › shared resources › should reuse geometry and materials across instances\n\n    TypeError: Projectile.coreMaterial.clone is not a function\n\n      84 |     this.core = new THREE.Mesh(\n      85 |       Projectile.coreGeometry, \n    > 86 |       Projectile.coreMaterial.clone()\n         |                               ^\n      87 |     );\n      88 |     this.mesh.add(this.core);\n      89 |     \n\n      at new Projectile (src/combat/Projectile.ts:86:31)\n      at Object.<anonymous> (src/combat/__tests__/Projectile.test.ts:13:18)\n","name":"/Users/tk/Documents/projects/game/src/combat/__tests__/Projectile.test.ts","startTime":1755740996885,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1755740997035,"message":"  ● Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.\n     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     • If you need a custom transformation specify a \"transform\" option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/configuration\n    For information about custom transformations, see:\n    https://jestjs.io/docs/code-transformation\n\n    Details:\n\n    /Users/tk/Documents/projects/game/src/world/World.ts:294\n            this.worker = new Worker(new URL('./mesher.worker.ts', import.meta.url), { type: 'module' });\n                                                                          ^^^^\n\n    SyntaxError: Cannot use 'import.meta' outside a module\n\n      2 | import { Ship } from '../Ship';\n      3 | import { Input } from '../../engine/input';\n    > 4 | import { World } from '../../world/World';\n        | ^\n      5 |\n      6 | // Mock dependencies\n      7 | jest.mock('../../engine/input');\n\n      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1505:14)\n      at Object.<anonymous> (src/entities/__tests__/Ship.test.ts:4:1)\n","name":"/Users/tk/Documents/projects/game/src/entities/__tests__/Ship.test.ts","startTime":1755740997035,"status":"failed","summary":""}],"wasInterrupted":false}
